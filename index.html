<!-- <!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=<device-width>, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="atualizar-contador">
</head>

<body>
    <div class="centralizar">
    <div>
        <img id="imagem" src="https://img3.stockfresh.com/files/n/nyul/m/38/623496_stock-photo-happy-old-man-sitting-on-sofa-with-laptop.jpg" alt="">
    </div>
    <div class="contador">    
        <h1>Estás animado?</h1>

        <p>Clique no botão para aumentar a animação:</p>
        <button onclick="incrementarContador()">Estou animado!</button>

        <p>O índice de animação está em:</p> 
        <span id="contador">0</span>

        <h1> Estamos a 0 dias desanimados</h1>
    </div>
</div>
</body>
 <script>
    // Função para incrementar o contador e armazenar o valor
    function incrementarContador() {
        // Verifica se há um valor armazenado no localStorage
        if (localStorage.getItem('contador')) {
            // Se houver, incrementa o valor em 1
            var contadorAtual = parseInt(localStorage.getItem('contador'));
            contadorAtual++;
            localStorage.setItem('contador', contadorAtual);
        } else {
            // Se não houver, define o valor inicial como 1
            localStorage.setItem('contador', 1);
        }

        // Atualiza o valor exibido na página
        document.getElementById('contador').textContent = localStorage.getItem('contador');
    }

    // Verifica se há um valor armazenado e exibe na página
    if (localStorage.getItem('contador')) {
        document.getElementById('contador').textContent = localStorage.getItem('contador');
    }
</script> 
      
</html> -->
<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Contador</title>
</head>
<body onload="carregarContador()">

<h1>Contador</h1>
<p>O contador está em: <span id="contador">Carregando...</span></p>

<button onclick="incrementarContador()">Incrementar</button>

<script>
// Função para fazer a requisição para obter o valor atual do contador
function carregarContador() {
  fetch('/api/obter-contador')
    .then(response => {
      if (response.ok) {
        return response.json();
      } else {
        throw new Error('Erro ao obter o contador');
      }
    })
    .then(data => {
      document.getElementById('contador').textContent = data.contador;
    })
    .catch(error => {
      console.error('Erro ao obter o contador:', error);
    });
}

// Função para fazer a requisição para incrementar o contador
function incrementarContador() {
  fetch('/api/atualizar-contador', { method: 'POST' })
    .then(response => {
      if (response.ok) {
        return response.json();
      } else {
        throw new Error('Erro ao incrementar o contador');
      }
    })
    .then(data => {
      document.getElementById('contador').textContent = data.contador;
    })
    .catch(error => {
      console.error('Erro ao incrementar o contador:', error);
    });
}
</script>

</body>
</html>
